<!-- AngularJS using $http service example -->
<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <title>AngularJS using $http service example</title>

  <!-- bootsrap CDN -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <style>
  .error {color: red;}
  </style>
</head>
<body>
  <div class="container" style="background-color: rgb(252, 249, 192);" ng-controller="httpCtrl">
    <div class="row">
      <div class="col-md-12">
        Select Service:
        <select class="form-control" ng-model="selectedService" ng-options="service.name for service in services" ng-change="selectService(selectedService)">
          <option value="">Select Service</option>
        </select>
        <h4>Service url: {{selectedService.ID != 2 ? selectedService.url : selectedService.url + selectedCountry.alpha3_code}}</h4>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-md-12" style="background-color:#fff;" ng-hide="selectedService.ID == 1 ? false : true">
        <h3>Your IP is <b>{{ip}}</b></h3>
        <input type="button" class="btn btn-success" value="Get IP" ng-click="getIP()">
      </div>
      <div class="col-md-12" style="background-color:#fff;" ng-hide="selectedService.ID == 2 ? false : true">
        <h4>Get States of selected country (Only INDIA and USA available)</h4>
        <select class="form-control" ng-model="selectedCountry" ng-options="country.name for country in countries" ng-change="getStates(selectedCountry)">
          <option value="">Select Country</option>
        </select>
        <h4>States</h4>
        <table class="table table-responsive table-striped table-bordered">
          <thead>
            <tr>
              <th>Name</th>
              <th>Abbr</th>
              <th>Area</th>
              <th>Capital</th>
              <th>Largest City</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="state in states">
              <td>{{state.name}}</td>
              <td>{{state.abbr}}</td>
              <td>{{state.area}}</td>
              <td>{{state.capital}}</td>
              <td>{{state.largest_city}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-12" style="background-color:#fff;" ng-hide="selectedService.ID == 3 ? false : true">
        <input type="button" class="btn btn-success" value="Get Weather" ng-click="getWeather()">
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-md-12">
        <ul style="list-style:none">
          <li><b>Response</b></li>
          <li><b>data:</b> {{response.data}}</li>
          <li><b>satus:</b> <span ng-class="{error: response.status >= 200 && response.status <=299 && response.status != '' ? false : true}">{{response.status}}</span></li>
          <li><b>config:</b> {{response.config}}</li>
          <li><b>headers:</b> {{response.config.headers}}</li>
          <li><b>statusText:</b> <span ng-class="{error: response.status >= 200 && response.status <=299 && response.status != '' ? false : true}">{{response.statusText}}</span></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- AngularJS CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
  <script src="app.js" type="text/javascript"></script>
</body>
</html>
